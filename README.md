# 💊DontBeWeak-BE🐈😼

![image](https://user-images.githubusercontent.com/107940475/250512147-131ac2e4-d716-4a4f-8f8f-fb054e92fdde.jpg)
</br>

## 프로젝트 소개
매일 먹을 영양제를 기록하고 체크 리스트로 관리해 보세요. 영양제를 챙기면서 고양이 성장시키는 서비스입니다.

> ***기획 배경***<br>
> 바쁜 현대 사회에서 매일 챙겨야 할 영양제를 깜빡하고 챙기지 못하는 경우가 생기는 사람들이 늘어나고 있습니다.
단순히 챙겨야 할 영양제를 체크 리스트로 관리하기만 하면 동기 부여가 부족해 같은 현상이 일어납니다.
이에 친구와 함께 영양제를 챙기는 걸 서로가 관리해주고 귀여운 고양이를 성장시키면 영양제를 더 잘 챙길 수 있지 않을까 하는 생각에 기획하게 되었습니다.

<br>

### 기존 프로젝트 코드 보러가기
[**팀 리포지토리 링크**](https://github.com/finalproject-hanghae)
<br>
<br>

## 📆제작 기간
<h3>2022-08-05 ~ 2022-09-15</h3>



## 👩‍💻Back-End 팀원 소개
|이름|개인 깃허브|담당 기능|
|------|---|---|
|김하늘|[@ha-neu1](https://github.com/ha-neu1)|영양제 관련 기능|
|배소정|[@sso3o-Bae](https://github.com/sso3o-Bae)|아이템 관련 기능|
|송주영|[@ju0song](https://github.com/ju0song)|친구 관련 기능|
|윤혜림|[@hryun11](https://github.com/hryun11)|고양이 관련 기능|



## 🛠Teck Stack & Tools
![Java](https://img.shields.io/badge/java11-%23ED8B00.svg?style=for-the-badge&logo=java&logoColor=white)
![](https://img.shields.io/badge/Spring-6DB33F.svg?&style=for-the-badge&logo=Spring&logoColor=white)
<img src="https://img.shields.io/badge/SpringBoot2.6.10-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
<img src="https://img.shields.io/badge/SpringSecurity2.6.7-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
<img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white">
<img src="https://img.shields.io/badge/KakaoLogin-FFCD00?style=for-the-badge&logo=kakao&logoColor=white">
<img src="https://img.shields.io/badge/NaverLogin-03C75A?style=for-the-badge&logo=naver&logoColor=white">
<img src="https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=ubuntu&logoColor=white">
<img src="https://img.shields.io/badge/Json Web Tokens-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white">
![MySQL](https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white) 
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">
![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)
<img alt="Amazon S3" src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white">
<img src="https://img.shields.io/badge/Jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white">
<img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white">
![](https://img.shields.io/badge/IntelliJ%20IDEA-000000.svg?&style=for-the-badge&logo=IntelliJ%20IDEA&logoColor=white)
<img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white">
<img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=white">
<img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white">

## 📌Service Architecture

![image](https://user-images.githubusercontent.com/107940475/250512175-8f05cc19-a1d3-4fe4-b3c8-d6a9be14082b.png)



## 🔗API

[API](https://octagonal-archeology-790.notion.site/7acdcfe28a0b43d7b47e47146ae7acb2?v=e65e0f88c16b4826b7917bb694052ea5)


## 💻ERD

![erd](https://user-images.githubusercontent.com/107940475/250512653-146d33d9-0c18-4cec-95f1-0b88b5ca9df9.png)



## 🚀trouble shooting
  
* [영양제 복용 기록 관리](https://github.com/finalproject-hanghae/DontBeWeak-BE/wiki/%EC%98%81%EC%96%91%EC%A0%9C-%EB%B3%B5%EC%9A%A9-%EA%B8%B0%EB%A1%9D-%EA%B4%80%EB%A6%AC)

* [아이템 구매 기록](https://github.com/finalproject-hanghae/DontBeWeak-BE/wiki/%EC%95%84%EC%9D%B4%ED%85%9C-%EA%B5%AC%EB%A7%A4-%EA%B8%B0%EB%A1%9D)

* [아이템 등록(서버)](https://github.com/finalproject-hanghae/DontBeWeak-BE/wiki/%EC%95%84%EC%9D%B4%ED%85%9C-%EB%93%B1%EB%A1%9D)


## 📑swagger ui

<!-- [swagger ui](http://52.78.29.70/swagger-ui.html/) -->

## 📍개선 사항
* [**피드백 개선**] 회원 탈퇴 기능 추가. 회원의 모든 기록 삭제.
* [**피드백 개선**] 내 영양제 삭제 기능 추가.<br>
  - 영양제 기록 엔티티에 영양제의 FK가 걸려있어 기록만 남기고 영양제 삭제 불가능한 문제 발생. (참조 무결성) Pill History 관련 로직이 영양제 FK 없이 기능하도록 코드 리팩토링. [**자세히**](https://mymydev.tistory.com/9)

<br>

* Member 단건 및 전체 조회 시 양방향 연관관계 엔티티 조회가 추가적으로 쿼리가 나가던 것을 쿼리 발생 1회로 개선. (N+1 문제 개선) [**자세히**](https://mymydev.tistory.com/8)
  * Member-Cat 엔티티 OneToOne 양방향 관계 무한 참조 오류 발견 후 코드 개선.
    [**자세히**](https://mymydev.tistory.com/7)
  * 모든 연관관계가 양방향 관계로 설정되어 있던 것을 Member-Cat 양방향 OneToOne 관계만 남기고 모두 단방향으로 변경.<br>이에 따라 각 서비스 레이어의 조회 로직도 함께 변경.

* MemberService-CatService, CatService-ItemHistoryService에서 Service 레이어 사이에 의존 관계를 형성하던 것들을 분리.
* Naver, Kakao 소셜로그인 서비스 레이어에서 'OAuthService' 공통 인터페이스로 분리 및 한 메소드에서 처리되던 긴 소셜로그인 처리 과정을 관심사별로 캡슐화하여 메소드 분리.
* Controller에서 RequestDto 객체를 그대로 Service 파라미터로 넘기던 것을 Dto 내의 각각의 값을 따로 Service 파라미터로 넘기도록 변경.
* 고양이 이미지 URL을 DB에 따로 테이블을 만들어 관리하던 것을 Enum 클래스로 관리하도록 변경.<br>고양이 진화 시 저장된 URL을 가져오기 위한 DB로의 조회없이 레벨에 맞는 이미지 변경이 가능하게 함.
